<UserControl x:Class="VorTech.App.Views.ClientsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             HorizontalContentAlignment="Stretch"
             VerticalContentAlignment="Stretch"
             d:DesignHeight="600" d:DesignWidth="1200">

  <!-- Grille externe : gauche fixe, séparateur, zone principale élastique -->
  <Grid Margin="12">
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="340"/>
      <ColumnDefinition Width="16"/>
      <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>

    <!-- ===== Colonne GAUCHE : liste clients ===== -->
    <GroupBox Grid.Column="0" Header="Clients"
              HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch">
      <Border Style="{StaticResource Card}">
        <ListBox ItemsSource="{Binding Clients}"
                 SelectedItem="{Binding SelectedClient, Mode=TwoWay}"
                 Background="{StaticResource Panel}"
                 BorderBrush="{StaticResource Border}"
                 BorderThickness="1"
                 Padding="8">
          <ListBox.ItemTemplate>
            <DataTemplate>
              <StackPanel Margin="0,6">
                <TextBlock Text="{Binding Nom}" FontWeight="SemiBold"/>
                <TextBlock Text="{Binding Prenom}" Foreground="{StaticResource Subtle}"/>
                <TextBlock Text="{Binding NomTeam}" FontStyle="Italic" Foreground="{StaticResource Subtle}"/>
              </StackPanel>
            </DataTemplate>
          </ListBox.ItemTemplate>
        </ListBox>
      </Border>
    </GroupBox>

    <!-- ===== Zone principale : Fiche ( * ) | Raccourcis ( Auto ) ===== -->
    <Grid Grid.Column="2" HorizontalAlignment="Stretch">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="16"/>
        <ColumnDefinition Width="Auto"/>
      </Grid.ColumnDefinitions>

      <!-- Fiche client -->
	<GroupBox Grid.Column="0" Header="Fiche client"
			  HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch">
	  <ScrollViewer x:Name="FicheScroll"
					VerticalScrollBarVisibility="Auto"
					HorizontalScrollBarVisibility="Disabled">
		<Grid Margin="6"
          Width="{Binding ElementName=FicheScroll, Path=ViewportWidth}">
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="12"/>
              <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Barre d'actions -->
            <StackPanel Orientation="Horizontal" Grid.Row="0">
              <Button Content="Nouveau" Click="New_Click"/>
              <Button Content="Enregistrer" Click="Save_Click"/>
              <Button Content="Supprimer" Click="Delete_Click"/>
              <Button Content="Recharger" Click="Reload_Click"/>
            </StackPanel>

            <Border Grid.Row="1" Height="12" Background="Transparent"/>

            <!-- Formulaire -->
            <Border Grid.Row="2" Style="{StaticResource Card}">
              <Grid HorizontalAlignment="Stretch">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="240"/>
                  <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Grid.RowDefinitions>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <Label Grid.Row="0" Grid.Column="0" Content="Nom"/>
                <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding SelectedClient.Nom, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8"/>

                <Label Grid.Row="1" Grid.Column="0" Content="Prenom"/>
                <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding SelectedClient.Prenom, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8"/>

                <Label Grid.Row="2" Grid.Column="0" Content="Nom Team"/>
                <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding SelectedClient.NomTeam, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8"/>

                <Label Grid.Row="3" Grid.Column="0" Content="Societe"/>
                <TextBox Grid.Row="3" Grid.Column="1" Text="{Binding SelectedClient.Societe, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8"/>

                <Label Grid.Row="4" Grid.Column="0" Content="SIRET"/>
                <TextBox Grid.Row="4" Grid.Column="1" Text="{Binding SelectedClient.Siret, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8"/>

                <Label Grid.Row="5" Grid.Column="0" Content="Adresse"/>
                <TextBox Grid.Row="5" Grid.Column="1" Text="{Binding SelectedClient.Adresse, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8"/>

                <Label Grid.Row="6" Grid.Column="0" Content="Code postal"/>
                <TextBox Grid.Row="6" Grid.Column="1" Text="{Binding SelectedClient.CodePostal, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8"/>

                <Label Grid.Row="7" Grid.Column="0" Content="Ville"/>
                <TextBox Grid.Row="7" Grid.Column="1" Text="{Binding SelectedClient.Ville, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8"/>

                <Label Grid.Row="8" Grid.Column="0" Content="Email"/>
                <TextBox Grid.Row="8" Grid.Column="1" Text="{Binding SelectedClient.Email, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8"/>

                <Label Grid.Row="9" Grid.Column="0" Content="Telephone"/>
                <TextBox Grid.Row="9" Grid.Column="1" Text="{Binding SelectedClient.Telephone, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8"/>

                <Label Grid.Row="10" Grid.Column="0" Content="Notes" VerticalAlignment="Top"/>
                <TextBox Grid.Row="10" Grid.Column="1"
                         Text="{Binding SelectedClient.Notes, UpdateSourceTrigger=PropertyChanged}"
                         AcceptsReturn="True" Height="120"
                         VerticalScrollBarVisibility="Auto"/>
              </Grid>
            </Border>
          </Grid>
        </ScrollViewer>
      </GroupBox>

      <!-- Séparateur -->
      <Border Grid.Column="1" Width="16" Background="Transparent"/>

      <!-- Raccourcis : largeur auto bornée -->
      <GroupBox Grid.Column="2" Header="Raccourcis"
                HorizontalAlignment="Left" HorizontalContentAlignment="Stretch"
                MinWidth="260" MaxWidth="360">
        <StackPanel Margin="6">
          <Button Content="Nouveau devis" Click="Shortcut_NewDevis_Click" Margin="0,0,0,6"/>
          <Button Content="Nouvelle facture" Click="Shortcut_NewFacture_Click" Margin="0,0,0,6"/>
          <Button Content="Devis du client" Click="Shortcut_DevisClient_Click" Margin="0,0,0,6"/>
          <Button Content="Factures du client" Click="Shortcut_FacturesClient_Click" Margin="0,0,0,6"/>
          <Button Content="Parc radios" Click="Shortcut_ParcRadios_Click" Margin="0,0,0,6"/>
          <Button Content="Cartes SIM" Click="Shortcut_CartesSim_Click" Margin="0,0,0,6"/>
          <Button Content="Frequences UHF" Click="Shortcut_FreqUhf_Click"/>
        </StackPanel>
      </GroupBox>
    </Grid>
  </Grid>
</UserControl>
